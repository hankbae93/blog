# PRD: AgentBreak

> AI 에이전트가 "멈춰야 할 순간"을 설정하고 알려주는 도구. 자동화의 무한 루프에서 인간의 의도를 지키는 브레이크.

**문서 정보**
- 작성일: 2026-01-28
- 버전: 1.0
- 상태: Draft
- 트랙: Essence

---

## 1. 개요 (Overview)

### 1.1 문제 정의 (Problem Statement)

- **누가** 겪는 문제인가?
  - AI 코딩 에이전트(Claude Code, Cursor Agent, Devin 등)를 사용하는 개발자
  - "한 번 더 돌려볼까"를 반복하다 원래 의도를 잃어버린 경험이 있는 사용자
  - Karpathy처럼 80% agentic coding을 하지만, 통제력 상실을 느끼는 시니어 개발자

- **무엇이** 문제인가?
  - AI 에이전트에게 작업을 맡기면 "언제 멈춰야 하는지" 기준이 없음
  - 에이전트가 코드를 수정 → 에러 발생 → 다시 수정 → 다른 에러 → 무한 반복
  - 결과물이 원래 의도와 완전히 달라져도 사용자가 인지하지 못함
  - "20K LOC in one session"처럼 거대한 변경이 한 번에 발생하면 리뷰 불가능

- **왜** 문제인가?
  - **통제력 상실**: 내 프로젝트인데 내가 이해 못하는 코드가 쌓임
  - **시간 낭비**: "한 번 더"를 10번 하면 원래 작업의 3배 시간 소요
  - **구조적 완전성 파괴**: vibecoding 2년 후 돌아오면 아키텍처가 스파게티
  - **전제 파괴**: "자동화가 많을수록 좋다"는 믿음이 장기적으로 틀림

### 1.2 솔루션 요약 (Solution Summary)

- **핵심 가치 제안**: AI 에이전트 작업에 "멈춤 조건"을 미리 설정하고, 조건 충족 시 에이전트를 자동으로 멈추며, 원래 의도와의 괴리를 시각화하여 인간이 판단할 수 있게 한다.

### 1.3 성공 지표 (Success Metrics)

| 지표 | 목표 | 측정 방법 |
|------|------|-----------|
| 무한 루프 방지율 | 70% 이상 | Break 조건 발동으로 중단된 세션 비율 |
| 의도 보존률 | 85% 이상 | 작업 완료 후 "원래 의도대로 됐다" 사용자 응답 비율 |
| 평균 세션 시간 감소 | 30% 이상 | Break 도입 전후 에이전트 세션 시간 비교 |
| 사용자 주간 활성률 | 60% 이상 | 주 1회 이상 AgentBreak 사용 |
| 월간 이탈률 (Churn) | 10% 미만 | 유료 구독 취소율 |

---

## 2. 타겟 사용자 (Target Users)

### 2.1 주요 페르소나

**페르소나 이름: 재현 (Jaehyun)**

- **직업/역할:** 시니어 풀스택 개발자, AI 스타트업 재직
- **인구통계:** 35세, 한국 거주, 개발 경력 10년
- **기술 수준:** 시니어. Claude Code로 일일 개발의 70% 수행
- **주요 고충점:**
  - "이 버그 고쳐줘" 했더니 에이전트가 관련 없는 파일 10개를 건드림
  - 한 시간 후 "아 이거 아니었는데..." 하고 git reset --hard
  - 에이전트가 무한 루프 돌 때 멈추는 기준이 없어서 그냥 지켜봄
  - "한 번만 더 돌려볼까"를 5번 반복하다 퇴근 시간 놓침
- **현재 대안:**
  - 수동으로 "5번만 시도하고 멈춰" 프롬프트에 작성 (잘 안 지켜짐)
  - git stash로 자주 저장 (귀찮아서 잊어버림)
  - 타이머 맞춰놓고 강제 종료 (맥락 날아감)

**페르소나 이름: Emily**

- **직업/역할:** 인디해커, AI 기반 SaaS 개발 중
- **인구통계:** 27세, 미국 거주, 비전공 출신 개발자 2년차
- **기술 수준:** 주니어. Cursor Agent에 크게 의존, 코드 직접 이해 어려움
- **주요 고충점:**
  - 에이전트가 만든 코드가 돌아가는데, 왜 돌아가는지 모름
  - "One Human + One Agent = Browser in 20K LOC" 같은 사례 보고 따라했다가 낭패
  - 에이전트 작업 결과가 원래 의도와 달라진 것을 뒤늦게 발견
  - 결국 처음부터 다시 하는 경우가 월 2-3회
- **현재 대안:**
  - 매번 전체 파일 백업 (용량 폭발)
  - 에이전트 응답 하나하나 수동 검토 (느림)
  - "잘 모르겠으면 멈춰" 프롬프트 (에이전트가 스스로 판단 못함)

### 2.2 사용자 시나리오

> "재현은 '로그인 버그 수정해줘'라고 Claude Code에 요청했다. 에이전트가 auth.ts를 수정하더니 타입 에러 발생. 그걸 고치려고 user.ts 수정. 거기서 또 에러. api.ts 수정. 1시간 후 20개 파일이 변경되어 있었다. 원래 로그인 버그는 auth.ts의 한 줄 수정으로 해결 가능한 것이었다. 그날 저녁, 재현은 모든 변경을 롤백했다."

> "Emily는 Cursor Agent로 결제 기능을 구현하고 있다. 에이전트가 Stripe 연동을 하더니, 에러 처리 로직에서 막혔다. '다시 시도해'를 7번 했다. 결과는 돌아가는 것 같은데, 코드가 300줄이 넘는다. 나중에 실제 결제 테스트를 해보니 특정 케이스에서 무한 루프. 결국 예제 코드 보고 처음부터 다시 짰다."

---

## 3. 기능 요구사항 (Functional Requirements)

### 3.1 MVP 필수 기능 (Must Have)

#### F1: Break Conditions (멈춤 조건 설정)
- **설명:** 에이전트 작업 시작 전에 "멈춤 조건"을 미리 정의. 조건 충족 시 에이전트 자동 일시정지.
- **사용자 스토리:** As a developer, I want to set clear stopping conditions before an agent starts working, so that I can prevent runaway modifications.
- **수용 기준:**
  - [ ] 시간 기반 조건: "30분 초과 시 멈춤"
  - [ ] 시도 횟수 기반: "동일 에러 3회 반복 시 멈춤"
  - [ ] 범위 기반: "변경 파일 5개 초과 시 멈춤", "변경 라인 200줄 초과 시 멈춤"
  - [ ] 복잡도 기반: "새 의존성 추가 시 확인 요청"
  - [ ] 조건 충족 시 에이전트 일시정지 및 사용자에게 알림
  - [ ] 사용자가 "계속 진행" 또는 "중단" 선택 가능

#### F2: Intent Drift Detection (의도 괴리 감지)
- **설명:** 작업 시작 시 기록한 "원래 의도"와 현재 진행 상황을 비교하여, 괴리 발생 시 경고.
- **사용자 스토리:** As a developer, I want to be alerted when the agent's work deviates significantly from my original intent, so that I can course-correct early.
- **수용 기준:**
  - [ ] 작업 시작 시 "원래 의도"를 명시적으로 기록 (사용자 입력 또는 첫 프롬프트에서 추출)
  - [ ] 매 에이전트 액션 후 "현재 상태"와 "원래 의도" 간 관련성 점수 계산
  - [ ] 관련성 점수가 임계치(기본 60%) 이하로 떨어지면 경고
  - [ ] "왜 관련 없다고 판단했는지" AI 분석 제공
  - [ ] 시각적으로 의도 괴리 정도 표시 (진행 바 또는 게이지)

#### F3: Session Summary & Checkpoint (세션 요약 및 체크포인트)
- **설명:** 에이전트 작업 중 자동으로 체크포인트 생성하고, 세션 종료 시 전체 변경 사항을 구조화된 요약으로 제공.
- **사용자 스토리:** As a developer, I want automatic checkpoints during agent work and a clear summary at the end, so that I can review and rollback if needed.
- **수용 기준:**
  - [ ] 에이전트 작업 5분마다 또는 주요 변경 시 자동 체크포인트 (git stash 또는 별도 저장)
  - [ ] 세션 종료 시 요약 보고서 자동 생성:
    - 변경된 파일 목록 및 diff 하이라이트
    - "원래 의도" vs "실제 결과" 비교
    - 총 시도 횟수, 발생한 에러 유형
    - 권장 액션 (승인/부분 롤백/전체 롤백)
  - [ ] 체크포인트 목록에서 원클릭 롤백 가능
  - [ ] 세션 히스토리 저장 및 검색 가능

### 3.2 향후 기능 (Nice to Have)
- **Agent Coaching**: 자주 발생하는 문제 패턴 학습 후 에이전트에게 사전 가이드 제공
- **Multi-Agent Coordination**: 여러 에이전트가 동시에 작업할 때 충돌 방지 및 조율
- **Intent Templates**: 일반적인 작업(버그 수정, 리팩토링, 기능 추가)별 기본 멈춤 조건 템플릿
- **Team Guardrails**: 팀 전체에 적용되는 에이전트 작업 정책 설정
- **Learning from Rollbacks**: 롤백 패턴 분석하여 멈춤 조건 자동 최적화

### 3.3 명시적 제외 (Out of Scope)
- **에이전트 자체 개발**: Claude Code, Cursor Agent 등 기존 도구와 연동만, 자체 에이전트 개발 안 함
- **코드 생성/수정 기능**: 멈춤과 감시에 집중, 코드 작성은 기존 에이전트에 위임
- **일반적인 코드 품질 분석**: SonarQube 영역 아님, 에이전트 작업의 "멈춤"에 특화
- **프로젝트 관리 기능**: Jira/Linear 대체 아님, 에이전트 세션 단위만 관리

---

## 4. 기술 요구사항 (Technical Requirements)

### 4.1 시스템 아키텍처

```
+------------------+     +------------------+     +------------------+
|   AI Agent       |     |   AgentBreak     |     |    User          |
|   (Claude Code,  |<--->|   Middleware     |<--->|    Interface     |
|    Cursor, etc)  |     |                  |     |    (VSCode Ext)  |
+------------------+     |  +------------+  |     +------------------+
                         |  | Condition  |  |
                         |  | Monitor    |  |     +------------------+
                         |  +------------+  |---->|    Alerts        |
                         |  +------------+  |     | (Toast/Sound/    |
                         |  | Intent     |  |     |  Slack)          |
                         |  | Tracker    |  |     +------------------+
                         |  +------------+  |
                         |  +------------+  |
                         |  | Checkpoint |  |
                         |  | Manager    |  |
                         |  +------------+  |
                         +------------------+
                                  |
                                  v
                         +------------------+
                         |    SQLite        |
                         | (Local Sessions) |
                         +------------------+
```

### 4.2 기술 스택

| 레이어 | 기술 | 선택 이유 |
|--------|------|-----------|
| Core Engine | Rust | 성능 중요 (에이전트 모든 액션 모니터링), 메모리 안전 |
| VSCode Extension | TypeScript | VSCode Extension API 기본 언어 |
| Intent Analysis | Claude API (Haiku) | 빠른 응답, 비용 효율적, 의도 비교에 충분 |
| Local Storage | SQLite | 로컬 저장, 설치 불필요, 빠른 조회 |
| Checkpoint | Git stash + Custom | 기존 Git 워크플로우 활용, 필요시 별도 저장소 |
| CLI Interface | Rust (clap) | 터미널 사용자 지원, Claude Code와 통합 |
| Dashboard (Optional) | Tauri + React | 로컬 앱, 크로스 플랫폼, 가벼움 |

### 4.3 외부 의존성

| 의존성 | 용도 | 대안 |
|--------|------|------|
| Claude API | 의도 괴리 분석, 요약 생성 | GPT-4o-mini, Gemini Flash |
| Git | 체크포인트, diff 추출 | 자체 파일 버전 관리 |
| VSCode Extension API | IDE 연동 | Cursor Extension, JetBrains Plugin |
| File System Watch | 변경 파일 감지 | chokidar (Node), notify (Rust) |

---

## 5. 비즈니스 요구사항 (Business Requirements)

### 5.1 수익 모델

**Freemium + Pro**

| 플랜 | 가격 | 포함 내용 |
|------|------|-----------|
| Free | $0/mo | 기본 멈춤 조건 3개, 수동 체크포인트, 세션 요약 |
| Pro | $12/mo | 무제한 멈춤 조건, 자동 체크포인트, 의도 괴리 감지, 세션 히스토리 무제한 |
| Team | $29/user/mo | Pro 전체 + 팀 정책 설정, 사용 분석, 우선 지원 |

**수익 목표**
- Y1 목표: 2,000 유료 사용자, $20k MRR
- Y2 목표: 10,000 유료 사용자, $100k MRR

### 5.2 시장 분석

**TAM (Total Addressable Market)**
- 글로벌 AI 코딩 에이전트 사용 개발자: 약 300만 명 (2026년 추정)
- 연간 개발 도구 지출: $100-300
- TAM: $300M - $900M

**SAM (Serviceable Addressable Market)**
- AI 에이전트를 일주일에 10시간 이상 사용하는 파워유저: 약 50만 명
- SAM: $50M - $150M

**SOM (Serviceable Obtainable Market)**
- 초기 2년 내 확보 가능: 10,000명
- SOM: $1.4M ARR

**경쟁 환경**
| 경쟁사 | 강점 | 약점 | 우리 차별점 |
|--------|------|------|-------------|
| 없음 (신규 카테고리) | - | - | 최초 진입자 |
| AI 에이전트 자체 기능 | 네이티브 통합 | 자기 제어에 한계 | 외부 감시자 역할 |
| Git hooks/자동화 | 단순함 | 지능 없음 | AI 기반 의도 추적 |
| 코드 리뷰 도구 | 사후 검토 | 실시간 아님 | 실시간 개입 |

### 5.3 Go-to-Market 전략

**Phase 1: 얼리어답터 확보 (Week 1-4)**
- "AI 에이전트에게 브레이크를 달다" 블로그 포스트
- Twitter/X에서 AI 코딩 무한루프 경험담 공유 요청
- Karpathy의 "80% agentic coding" 담론에 참여

**Phase 2: 개발자 커뮤니티 (Week 5-12)**
- Hacker News "Show HN" 런칭
- "Agent Fatigue: Why More Automation Isn't Always Better" 연구 발표
- VSCode Marketplace 등록

**Phase 3: 에이전트 생태계 연동 (Week 13-24)**
- Claude Code, Cursor 공식 연동 협의
- "AgentBreak for [Agent Name]" 시리즈 확장
- 기업 파일럿 프로그램 시작

---

## 6. 마일스톤 (Milestones)

### Phase 1: MVP (Week 1-2)

**Week 1: 핵심 엔진**
- [ ] 프로젝트 셋업 (Rust + SQLite)
- [ ] 파일 시스템 변경 감지 구현
- [ ] 기본 멈춤 조건 구현 (시간, 파일 수, 라인 수)
- [ ] CLI 인터페이스 (agentbreak start, agentbreak status, agentbreak stop)

**Week 2: IDE 연동**
- [ ] VSCode Extension 기본 구조
- [ ] 멈춤 조건 설정 UI (사이드바 패널)
- [ ] 조건 충족 시 알림 (Toast + 사운드)
- [ ] 수동 체크포인트 및 롤백 기능

**MVP 완료 기준:**
- Claude Code 또는 Cursor에서 에이전트 작업 시작 → 조건 충족 시 자동 경고 파이프라인 동작
- 본인 프로젝트에서 1주일간 테스트 완료

### Phase 2: Beta Launch (Week 3-4)

**Week 3: 의도 추적**
- [ ] 의도 기록 UI 구현
- [ ] Claude API 연동 - 의도 괴리 분석 프롬프트 개발
- [ ] 괴리 점수 시각화 (진행 바)
- [ ] 자동 체크포인트 구현

**Week 4: 베타 런칭**
- [ ] 세션 요약 보고서 생성 기능
- [ ] 10명 베타 테스터 모집 (AI 코딩 헤비 유저)
- [ ] 베타 피드백 수집 및 개선
- [ ] Hacker News "Show HN" 준비

**Beta 완료 기준:**
- 10명 베타 사용자 2주간 사용
- "의도 보존률" 체감 개선 피드백 5건 이상
- 치명적 버그 0건

---

## 7. 리스크 및 의존성 (Risks & Dependencies)

| 리스크 | 영향도 | 발생 가능성 | 대응 방안 |
|--------|--------|-------------|-----------|
| 에이전트 API 접근 제한 | 치명적 | 높음 | 파일 시스템 레벨 모니터링으로 우회, 에이전트 출력 파싱 |
| 의도 괴리 판단 부정확 | 높음 | 중간 | 사용자 피드백 학습, 보수적 판단 (의심되면 경고) |
| "멈춤"에 대한 사용자 저항 | 중간 | 중간 | 기본값 느슨하게, 점진적으로 조임. "브레이크"가 아닌 "세이프가드" 프레이밍 |
| AI 에이전트가 자체 브레이크 기능 추가 | 높음 | 중간 | 멀티 에이전트 통합 지원으로 차별화 |
| 로컬 전용이라 클라우드 동기화 요구 | 낮음 | 높음 | 초기에는 로컬 집중, 추후 선택적 클라우드 동기화 |

**핵심 의존성:**
1. **파일 시스템 접근**: 에이전트 변경 사항 감지의 핵심
2. **Git 통합**: 체크포인트, diff의 핵심
3. **개발자의 에이전트 피로 경험**: 제품 개발자가 "멈춰야 할 때"를 체감해봐야 정확한 조건 설정 가능

---

## 부록: Essence Track 관점

### 파괴하는 전제
> "자동화가 많을수록 좋다"

AI 에이전트 도구들은 모두 "더 많이, 더 빠르게, 더 자동으로"를 외친다. 하지만 자동화에는 임계점이 있다. 그 임계점을 넘으면 오히려 생산성이 떨어진다. "한 번 더 돌려볼까"를 10번 하면 처음부터 수동으로 하는 것보다 느리다. AgentBreak는 "멈춤의 가치"를 묻는다.

### 방치된 이유
- **AI 도구 회사의 수익 모델**: "더 많이 자동화 = 더 많이 사용 = 더 많은 수익". 멈추라고 말하면 손해.
- **사용자의 심리**: "한 번만 더 하면 될 것 같은데..." 희망 편향
- **측정 어려움**: "적절한 멈춤"의 기준이 명확하지 않아 아무도 연구 안 함
- **최근 현상**: AI 에이전트가 본격화된 것은 2024년 이후, 아직 문제가 충분히 인식되지 않음

### 비합리적 행동의 증거
- 개발자들이 에이전트에게 "5번만 시도하고 멈춰"라고 프롬프트에 쓰지만, 에이전트는 무시
- git reset --hard를 에이전트 사용 전보다 3배 이상 더 자주 실행
- "아 이거 그냥 내가 할걸" 하면서도 다음에 또 에이전트에게 맡김
- Karpathy가 80% agentic coding 한다니까 따라하지만, 그의 수십 년 경험과 직감은 복제 불가

### 진정성 요구사항
이 제품은 반드시 **본인이 AI 에이전트로 프로젝트를 완전히 망쳐본 경험이 있는 사람**이 만들어야 한다. 그렇지 않으면:
- "멈춰야 할 순간"의 미묘한 신호를 모름
- 에이전트 무한 루프의 답답함을 체감 못함
- "한 번만 더"의 유혹이 얼마나 강한지 이해 못함
- 원래 의도가 어떻게 서서히 잊혀지는지 경험 없음

**권장 사항**: AI 에이전트로 중간 규모(1,000줄 이상) 기능을 구현하다 3번 이상 롤백한 경험이 있어야 함. 그 좌절의 기록이 이 제품의 진정한 요구사항 문서가 된다.

---

## 부록: 관련 배경 자료

### Andrej Karpathy의 발언
- "80% agentic coding" - AI 에이전트에 대부분의 코딩을 위임
- 하지만 그의 수십 년 경험이 "언제 개입할지"를 판단하게 해줌

### Vibecoding 2년 후
- 초기의 빠른 생산성 후, 코드베이스 복잡도 폭발
- "구조적 완전성" 문제 - 전체 아키텍처가 일관성 없이 성장
- "One Human + One Agent = Browser in 20K LOC" - 인상적이지만, 그 20K LOC를 누가 유지보수?

### 멈춤의 가치
- 모든 자동화 시스템에는 안전장치가 있음 (자동차 브레이크, 기계 비상정지 버튼)
- AI 에이전트에는 왜 없는가? → 아직 아무도 만들지 않았기 때문
- AgentBreak = AI 시대의 브레이크 페달
